import re

with open('input2.txt') as input:
    total1 = 0
    total2 = 0
    for idx, line in enumerate(input):
        number = idx + 1
        x, games = line.split(":")
        games = games.split(";")
        possible = True
        min_green = 0
        min_red = 0
        min_blue = 0
        for game in games:
            print('turn', game)
            play = game.split(",")
            for turn in play:
                if 'green' in turn:
                    digit = int("".join(c for c in turn if c.isdigit()))
                    min_green = max(digit, min_green)
                    if digit > 13:
                        possible = False
                elif 'red' in turn:
                    digit = int("".join(c for c in turn if c.isdigit()))
                    min_red = max(digit, min_red)
                    if digit > 12:
                        possible = False
                elif 'blue' in turn:
                    digit = int("".join(c for c in turn if c.isdigit()))
                    min_blue = max(digit, min_blue)
                    if digit > 14:
                        possible = False
                else:
                    possible = False
        print('min', 'red', min_red,'green', min_green, 'blue', min_blue)
        if possible:
            total1 += number
        total2 += min_green*min_red*min_blue
        # print(min_green*min_red*min_blue)
        min_green = 0
        min_red = 0
        min_blue = 0
            
print(total1, total2)

                



